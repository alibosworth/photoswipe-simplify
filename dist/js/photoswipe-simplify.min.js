/*! photoswipe-simplify v0.0.2 | (c) 2019 Mineo Okuda | MIT License | git+ssh://git@github.com:min30327/photoswipe-simplify.git */
function finallyConstructor(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}function noop(){}function bind(e,t){return function(){e.apply(t,arguments)}}function Promise(e){if(!(this instanceof Promise))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],doResolve(e,this)}function handle(e,t){for(;3===e._state;)e=e._value;if(0===e._state)return void e._deferreds.push(t);e._handled=!0,Promise._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?resolve:reject)(t.promise,e._value);var i;try{i=n(e._value)}catch(e){return void reject(t.promise,e)}resolve(t.promise,i)}))}function resolve(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof Promise)return e._state=3,e._value=t,void finale(e);if("function"==typeof n)return void doResolve(bind(n,t),e)}e._state=1,e._value=t,finale(e)}catch(t){reject(e,t)}}function reject(e,t){e._state=2,e._value=t,finale(e)}function finale(e){2===e._state&&0===e._deferreds.length&&Promise._immediateFn((function(){e._handled||Promise._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)handle(e,e._deferreds[t]);e._deferreds=null}function Handler(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function doResolve(e,t){var n=!1;try{e((function(e){n||(n=!0,resolve(t,e))}),(function(e){n||(n=!0,reject(t,e))}))}catch(e){if(n)return;n=!0,reject(t,e)}}!(function(e,t){"use strict";"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.photoswipeSimplify=t()})(this,(function(){"use strict";var e={target:"[data-pswp]"},t=function(){var e={},t=0,n=arguments.length;for(t=0;t<n;t++){var i=arguments[t];!(function(t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(i)}return e},n=function(){};return n.prototype={initialized:!1,pswpElement:"",galleries:[],thumbnails:[],tmps:[],items:[],options:{},ImagesLoaded:!1,init:function(n){var i=this;i.options=t(e,n||{}),i.initialized||(i.append_template(),i.initialized=!0),i.initPhotoSwipe(i.options.target)},append_template:function(){var e=document.getElementsByTagName("body")[0],t=document.createElement("div");t.innerHTML='<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div> </div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div>',e.appendChild(t)},initPhotoSwipe:function(e){var t=this;if(t.pswpElement=document.querySelectorAll(".pswp")[0],t.galleries=document.querySelectorAll(e),t.galleries.length>0)for(var n=0;n<t.galleries.length;n++){if(t.items[n]=[],t.thumbnails[n]=[],t.tmps[n]=t.galleries[n].getElementsByTagName("a"),t.tmps[n]=Array.prototype.slice.call(t.tmps[n]),t.tmps[n].length>0)for(var i=0;i<t.tmps[n].length;i++){var o=t.tmps[n][i].getAttribute("href");/(.gif|.jpe?g|.png|.bmp)/.test(o.toLowerCase())&&t.thumbnails[n].push(t.tmps[n][i])}var r=new Promise(function(e){t.parseItems(e,n)});if(r.then((function(){t.galleryLoaded()})),t.thumbnails[n].length>0)for(var s=0;s<t.thumbnails[n].length;s++)t.thumbnails[n][s].setAttribute("data-pswp-index",n),t.thumbnails[n][s].classList.add("pswp--item"),t.attachEvent(t.thumbnails[n][s],n,s)}},galleryLoaded:function(){var e=this;if(e.galleries.length>0)for(var t=0;t<e.galleries.length;t++)e.galleries[t].classList.add("pswp--loaded")},attachEvent:function(e,t,n){var i=this;e.addEventListener("click",(function(e){e.preventDefault(),document.body.classList.add("pswp--launched");var o=document.querySelector(".pswp--active");return o&&o.classList.remove("pswp--active"),i.galleries[t].classList.add("pswp--active"),i.galleries[t].setAttribute("data-pswp-index",n),i.galleries[t].classList.contains("pswp--loaded")&&n>=0&&i.open(t,n),!1}))},getImageSizes:function(e,t,n,i,o){var r=this;new Promise(function(s,a){var l=new Image;l.src=e,l.onload=function(){r.items[t][n]={src:e,w:l.naturalWidth,h:l.naturalHeight,title:i,author:o},s()}})},open:function(e,t){var n,i=this;i.galleries[e];i.options.galleryUID=e,i.options.index=t,i.options.getThumbBoundsFn=function(e){var t=document.querySelector(".pswp--active");if(t){var n=t.querySelectorAll(".pswp--item")[e].getElementsByTagName("img")[0],i=window.pageYOffset||document.documentElement.scrollTop,o=n.getBoundingClientRect();return{x:o.left,y:o.top+i,w:o.width}}},i.options.addCaptionHTMLFn=function(e,t,n){return e.title?(t.children[0].innerHTML=e.title,e.author&&(t.children[0].innerHTML+="<br><small>"+e.author+"</small>"),!0):(t.children[0].innerText="",!1)},document.body.classList.remove("pswp--launched"),n=new PhotoSwipe(i.pswpElement,PhotoSwipeUI_Default,i.items[e],i.options),n.init()},parseItems:function(e,t){var n=this,i=[];if(n.thumbnails[t].length>0)for(var o=0;o<n.thumbnails[t].length;o++){var r=n.thumbnails[t][o].getAttribute("href"),s=n.thumbnails[t][o].getAttribute("data-caption"),a=n.thumbnails[t][o].getAttribute("data-author");i.push(n.getImageSizes(r,t,o,s,a)),Promise.all(i).then((function(){e()}))}}},new n}));var setTimeoutFunc=setTimeout;Promise.prototype.catch=function(e){return this.then(null,e)},Promise.prototype.then=function(e,t){var n=new this.constructor(noop);return handle(this,new Handler(e,t,n)),n},Promise.prototype.finally=finallyConstructor,Promise.all=function(e){return new Promise(function(t,n){function i(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(t){i(e,t)}),n)}o[e]=s,0==--r&&t(o)}catch(e){n(e)}}if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var o=Array.prototype.slice.call(e);if(0===o.length)return t([]);for(var r=o.length,s=0;s<o.length;s++)i(s,o[s])})},Promise.resolve=function(e){return e&&"object"==typeof e&&e.constructor===Promise?e:new Promise(function(t){t(e)})},Promise.reject=function(e){return new Promise(function(t,n){n(e)})},Promise.race=function(e){return new Promise(function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)})},Promise._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){setTimeoutFunc(e,0)},Promise._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var globalNS=(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")})();"Promise"in globalNS?globalNS.Promise.prototype.finally||(globalNS.Promise.prototype.finally=finallyConstructor):globalNS.Promise=Promise;