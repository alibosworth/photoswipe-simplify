/*! photoswipe-simplify v0.0.1 | (c) 2018 Mineo Okuda | MIT License | git+ssh://git@github.com:min30327/photoswipe-simplify.git */
!(function(t,e){"use strict";"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.photoswipeSimplify=e()})(this,(function(){"use strict";var t={target:"[data-pswp]"},e=function(){var t={},e=0,i=arguments.length;for(e=0;e<i;e++){var s=arguments[e];!(function(e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(s)}return t},i=function(){};return i.prototype={initialized:!1,pswpElement:"",galleries:[],thumbnails:[],tmps:[],items:[],options:{},ImagesLoaded:!1,init:function(i){var s=this;s.options=e(t,i||{}),s.initialized||(s.append_template(),s.initialized=!0),s.initPhotoSwipe(s.options.target)},append_template:function(){var t=document.getElementsByTagName("body")[0],e=document.createElement("div");e.innerHTML='<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button><button class="pswp__button pswp__button--share" title="Share"></button><button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button><button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div> </div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button><button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div>',t.appendChild(e)},initPhotoSwipe:function(t){var e=this;if(e.pswpElement=document.querySelectorAll(".pswp")[0],e.galleries=document.querySelectorAll(t),e.galleries.length>0)for(var i=0;i<e.galleries.length;i++){if(e.items[i]=[],e.thumbnails[i]=[],e.tmps[i]=e.galleries[i].getElementsByTagName("a"),e.tmps[i]=Array.prototype.slice.call(e.tmps[i]),e.tmps[i].length>0)for(var s=0;s<e.tmps[i].length;s++){var n=e.tmps[i][s].getAttribute("href");/(.gif|.jpe?g|.png|.bmp)/.test(n.toLowerCase())&&e.thumbnails[i].push(e.tmps[i][s])}var a=new Promise(function(t){e.parseItems(t,i)});if(a.then((function(){e.galleryLoaded()})),e.thumbnails[i].length>0)for(var o=0;o<e.thumbnails[i].length;o++)e.thumbnails[i][o].setAttribute("data-pswp-index",i),e.thumbnails[i][o].classList.add("pswp--item"),e.attachEvent(e.thumbnails[i][o],i,o)}},galleryLoaded:function(){var t=this;if(t.galleries.length>0)for(var e=0;e<t.galleries.length;e++)t.galleries[e].classList.add("pswp--loaded")},attachEvent:function(t,e,i){var s=this;t.addEventListener("click",(function(t){t.preventDefault(),document.body.classList.add("pswp--launched");var n=document.querySelector(".pswp--active");return n&&n.classList.remove("pswp--active"),s.galleries[e].classList.add("pswp--active"),s.galleries[e].setAttribute("data-pswp-index",i),s.galleries[e].classList.contains("pswp--loaded")&&i>=0&&s.open(e,i),!1}))},getImageSizes:function(t,e,i,s,n){var a=this;new Promise(function(o,l){var p=new Image;p.src=t,p.onload=function(){a.items[e][i]={src:t,w:p.naturalWidth,h:p.naturalHeight,title:s,author:n},o()}})},open:function(t,e){var i,s=this;s.galleries[t];s.options.galleryUID=t,s.options.index=e,s.options.getThumbBoundsFn=function(t){var e=document.querySelector(".pswp--active");if(e){var i=e.querySelectorAll(".pswp--item")[t].getElementsByTagName("img")[0],s=window.pageYOffset||document.documentElement.scrollTop,n=i.getBoundingClientRect();return{x:n.left,y:n.top+s,w:n.width}}},s.options.addCaptionHTMLFn=function(t,e,i){return t.title?(e.children[0].innerHTML=t.title,t.author&&(e.children[0].innerHTML+="<br><small>"+t.author+"</small>"),!0):(e.children[0].innerText="",!1)},document.body.classList.remove("pswp--launched"),i=new PhotoSwipe(s.pswpElement,PhotoSwipeUI_Default,s.items[t],s.options),i.init()},parseItems:function(t,e){var i=this,s=[];if(i.thumbnails[e].length>0)for(var n=0;n<i.thumbnails[e].length;n++){var a=i.thumbnails[e][n].getAttribute("href"),o=i.thumbnails[e][n].getAttribute("data-caption"),l=i.thumbnails[e][n].getAttribute("data-author");s.push(i.getImageSizes(a,e,n,o,l)),Promise.all(s).then((function(){t()}))}}},new i}));